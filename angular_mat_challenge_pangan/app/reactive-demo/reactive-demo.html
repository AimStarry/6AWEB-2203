<div class="row justify-content-center">
  <div class="col-md-8 col-lg-6">

    @if (submitted && userForm.valid) {
      <div class="alert alert-primary border-0 shadow-sm mb-4 animate__animated animate__fadeIn">
        <i class="bi bi-shield-check me-2"></i> Reactive Profile Created!
      </div>
    }

    <div class="mb-5 text-center">
      <h2 class="fw-light">Reactive Registration</h2>
      <p class="text-muted small text-uppercase tracking-wider">Model-Driven Form Design</p>
    </div>

    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

      <div class="mb-4">
        <label class="form-label mini-label">Full Name</label>
        <input type="text" formControlName="username" class="form-control minimalist-input"
          [class.is-invalid]="isInvalid('username')" placeholder="Aimee Pangan">
        @if (isInvalid('username')) {
          <div class="invalid-feedback">Username is required.</div>
        }
      </div>

      <div class="row">
        <div class="col-md-6 mb-4">
          <label class="form-label mini-label">Email Address</label>
          <input type="email" formControlName="email" class="form-control minimalist-input"
            [class.is-invalid]="isInvalid('email')" placeholder="aimee@gmail.com">
          @if (isInvalid('email')) {
            <div class="invalid-feedback">
              {{ userForm.get('email')?.hasError('required') ? 'Email is required.' : 'Invalid email format.' }}
            </div>
          }
        </div>

        <div class="col-md-6 mb-4">
          <label class="form-label mini-label">Password</label>
          <input type="password" formControlName="password" class="form-control minimalist-input"
            [class.is-invalid]="isInvalid('password')" placeholder="••••••••">
          @if (isInvalid('password')) {
            <div class="invalid-feedback">Min. 6 characters required.</div>
          }
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label mini-label d-block">Gender</label>
        <div class="d-flex gap-4 mt-2">
          <div class="form-check">
            <input class="form-check-input" type="radio" formControlName="gender" id="r-male" value="male">
            <label class="form-check-label" for="r-male">Male</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" formControlName="gender" id="r-female" value="female">
            <label class="form-check-label" for="r-female">Female</label>
          </div>
        </div>
        @if (isInvalid('gender')) {
          <div class="text-danger extra-small mt-1">Please select a gender.</div>
        }
      </div>

      <div class="row">
        <div class="col-md-6 mb-4">
          <label class="form-label mini-label">Account Role</label>
          <select formControlName="role" class="form-select minimalist-input" [class.is-invalid]="isInvalid('role')">
            <option value="" disabled>Select Role</option>
            <option value="admin">Admin</option>
            <option value="user">User</option>
            <option value="guest">Guest</option>
          </select>
          @if (isInvalid('role')) { <div class="invalid-feedback">Role is required.</div> }
        </div>

        <div class="col-md-6 mb-4">
          <label class="form-label mini-label">Employment Status</label>
          <select formControlName="status" class="form-select minimalist-input" [class.is-invalid]="isInvalid('status')">
            <option value="" disabled>Select Status</option>
            <option value="Permanent">Permanent</option>
            <option value="Probationary">Probationary</option>
          </select>
          @if (isInvalid('status')) { <div class="invalid-feedback">Status is required.</div> }
        </div>
      </div>

      <div class="mb-5">
        <label class="form-label mini-label">Comments / Notes</label>
        <textarea formControlName="comments" rows="2" class="form-control minimalist-input bg-light-subtle p-2"
          placeholder="Additional notes..."></textarea>
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow-sm py-3 fw-bold text-uppercase small">
          Submit Reactive Form
        </button>
      </div>
    </form>

    @if (submitted && userForm.valid) {
      <div class="mt-5 p-4 border rounded bg-light shadow-sm">
        <h5 class="mb-3">Submitted User Data:</h5>
        <ul class="list-unstyled">
          <li><strong>Name:</strong> {{ userForm.value.username }}</li>
          <li><strong>Email:</strong> {{ userForm.value.email }}</li>
          <li><strong>Role:</strong> {{ userForm.value.role }}</li>
          <li><strong>Status:</strong> {{ userForm.value.status }}</li>
          <li><strong>Gender:</strong> {{ userForm.value.gender }}</li>
          <li><strong>Comments:</strong> {{ userForm.value.comments || 'N/A' }}</li>
        </ul>
      </div>
    }

  </div>
</div>
